# 設計文書

## 概要

サブスクリプション型モバイルアプリ向けの汎用的な利用規約とプライバシーポリシーを、GitHub Pagesを使用してホストするWebサイトとして設計します。既存の広告ベースの法的文書を参考に、サブスクリプションモデルに特化した内容に調整し、英語と日本語の両方で提供します。

## アーキテクチャ

### サイト構造
```
legal_common/
├── index.html (ランディングページ)
├── en/
│   ├── terms.html (英語利用規約)
│   └── privacy.html (英語プライバシーポリシー)
├── ja/
│   ├── terms.html (日本語利用規約)
│   └── privacy.html (日本語プライバシーポリシー)
├── assets/
│   ├── css/
│   │   └── style.css
│   └── js/
│       └── main.js
└── _config.yml (GitHub Pages設定)
```

### 技術スタック
- **ホスティング**: GitHub Pages
- **フロントエンド**: HTML5, CSS3, JavaScript (ES6+)
- **スタイリング**: レスポンシブデザイン、モバイルファースト
- **バージョン管理**: Git/GitHub

## コンポーネントと インターフェース

### 1. ナビゲーションコンポーネント
- 言語切り替え機能（英語/日本語）
- 文書間のナビゲーション（利用規約/プライバシーポリシー）
- モバイル対応ハンバーガーメニュー

### 2. 文書表示コンポーネント
- 目次の自動生成
- セクションへのアンカーリンク
- 印刷対応レイアウト
- 検索機能（ブラウザ内検索の最適化）

### 3. レスポンシブレイアウト
- デスクトップ: サイドバー付き2カラムレイアウト
- タブレット: 1カラムレイアウト、折りたたみ可能な目次
- モバイル: シンプルな1カラム、スティッキーナビゲーション

## データモデル

### 利用規約構造
```
利用規約 {
  - サービス概要
  - 利用条件
  - ユーザーアカウント
  - サブスクリプションと支払い
  - 知的財産権
  - 禁止行為
  - サービスの変更・停止
  - 免責事項
  - 準拠法と管轄
  - 連絡先
}
```

### プライバシーポリシー構造
```
プライバシーポリシー {
  - 収集する情報
  - 情報の使用目的
  - 情報の共有
  - データの保存と保護
  - ユーザーの権利
  - Cookie等の技術
  - 第三者サービス
  - 国際的なデータ転送
  - ポリシーの変更
  - 連絡先
}
```

### 多言語対応データ構造
```javascript
const content = {
  en: {
    terms: { /* 英語利用規約コンテンツ */ },
    privacy: { /* 英語プライバシーポリシーコンテンツ */ }
  },
  ja: {
    terms: { /* 日本語利用規約コンテンツ */ },
    privacy: { /* 日本語プライバシーポリシーコンテンツ */ }
  }
}
```

## エラーハンドリング

### 404エラー対応
- カスタム404ページの実装
- 適切な言語での案内表示
- メインページへの誘導

### ブラウザ互換性
- モダンブラウザ対応（Chrome, Firefox, Safari, Edge）
- IE11以下は基本機能のみサポート
- プログレッシブエンハンスメント

### アクセシビリティ
- WCAG 2.1 AA準拠
- スクリーンリーダー対応
- キーボードナビゲーション
- 適切なコントラスト比

## テスト戦略

### 1. 機能テスト
- 言語切り替え機能の動作確認
- ナビゲーションリンクの動作確認
- レスポンシブデザインの表示確認
- アンカーリンクの動作確認

### 2. コンテンツテスト
- 法的文書の内容精査
- 翻訳の正確性確認
- リンクの有効性確認
- 誤字脱字チェック

### 3. パフォーマンステスト
- ページ読み込み速度の測定
- モバイル表示速度の確認
- GitHub Pagesの配信速度確認

### 4. ユーザビリティテスト
- モバイルでの読みやすさ確認
- 目次からのナビゲーション確認
- 検索機能の使いやすさ確認

### 5. 法的コンプライアンステスト
- GDPR要件の確認
- 日本の個人情報保護法への準拠確認
- アプリストア（App Store/Google Play）のポリシー準拠確認

## セキュリティ考慮事項

### HTTPS対応
- GitHub Pagesの標準HTTPS使用
- 混在コンテンツの回避

### コンテンツセキュリティ
- XSS攻撃の防止
- 適切なHTTPヘッダーの設定
- 外部リソースの最小化

## デプロイメント戦略

### GitHub Actions
- 自動デプロイメントパイプライン
- HTMLバリデーション
- リンクチェック
- 多言語コンテンツの整合性チェック

### ブランチ戦略
- main: 本番環境
- develop: 開発環境
- feature/*: 機能開発ブランチ

## 保守性とカスタマイズ性

### テンプレート化
- 会社名、連絡先等の変数化
- CSS変数によるブランディング対応
- 設定ファイルによる簡単カスタマイズ

### 文書更新プロセス
- Markdownでの原稿管理
- HTMLへの自動変換
- バージョン管理による変更履歴追跡